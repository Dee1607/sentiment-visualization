{"ast":null,"code":"import _classCallCheck from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/src/components/PieChart.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport \"./CanadaMap.css\";\nimport Province from \"./Province\";\nimport { withRouter } from \"react-router-dom\";\nimport DonutJSON from \"./PieChartData.json\";\nimport PieClass from \"./PieClass\";\nimport * as d3 from \"d3\";\n\nvar PieChart = /*#__PURE__*/function (_Component) {\n  _inherits(PieChart, _Component);\n\n  var _super = _createSuper(PieChart);\n\n  function PieChart(props) {\n    var _this;\n\n    _classCallCheck(this, PieChart);\n\n    _this = _super.call(this, props);\n    _this.chRef = React.createRef();\n    return _this;\n  }\n\n  _createClass(PieChart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.drawChart();\n    }\n  }, {\n    key: \"drawChart\",\n    value: function drawChart() {\n      // Create dummy data\n      var data = DonutJSON;\n      var usableData = {};\n\n      for (var i = 0; i <= 15; i++) {\n        if (data[i]) {\n          if (data[i].location === this.props.location.state) {\n            usableData = data[i];\n          }\n        }\n      }\n\n      var width = 450,\n          height = 450,\n          margin = 40; // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\n\n      var radius = Math.min(width, height) / 2 - margin; // append the svg object to the div called 'my_dataviz'\n\n      var svg = d3.select(this.chRef.current).append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\"); // create 2 data_set\n\n      var data1 = {\n        a: 9,\n        b: 20,\n        c: 30,\n        d: 8,\n        e: 12\n      }; // var data2 = {a: 6, b: 16, c:20, d:14, e:19, f:12}\n      // set the color scale\n\n      var color = d3.scaleOrdinal().domain([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"]).range(d3.schemeDark2); // A function that create / update the plot for a given variable:\n      // Compute the position of each group on the pie:\n\n      var pie = d3.pie().value(function (d) {\n        return d.value;\n      }).sort(function (a, b) {\n        console.log(a);\n        return d3.ascending(a.key, b.key);\n      }); // This make sure that group order remains the same in the pie chart\n\n      var data_ready = pie(data1); // map to data\n\n      var u = svg.selectAll(\"path\").data(data_ready); // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n\n      u.enter().append('path').merge(u).transition().duration(1000).attr('d', d3.arc().innerRadius(0).outerRadius(radius)).attr('fill', function (d) {\n        return color(d.data1.key);\n      }).attr(\"stroke\", \"white\").style(\"stroke-width\", \"2px\").style(\"opacity\", 1); // remove the group that is not present anymore\n\n      u.exit().remove();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }\n      }, this.props.location.state), /*#__PURE__*/React.createElement(\"div\", {\n        ref: this.chRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"script\", {\n        src: \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/d3/dist/d3.js\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"script\", {\n        src: \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/d3moji/d3moji.js\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 9\n        }\n      }));\n    }\n  }]);\n\n  return PieChart;\n}(Component);\n\nexport default withRouter(PieChart);","map":{"version":3,"sources":["/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/src/components/PieChart.js"],"names":["React","Component","useState","useEffect","Province","withRouter","DonutJSON","PieClass","d3","PieChart","props","chRef","createRef","drawChart","data","usableData","i","location","state","width","height","margin","radius","Math","min","svg","select","current","append","attr","data1","a","b","c","d","e","color","scaleOrdinal","domain","range","schemeDark2","pie","value","sort","console","log","ascending","key","data_ready","u","selectAll","enter","merge","transition","duration","arc","innerRadius","outerRadius","style","exit","remove"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport \"./CanadaMap.css\";\nimport Province from \"./Province\";\nimport { withRouter } from \"react-router-dom\";\nimport DonutJSON from \"./PieChartData.json\";\nimport PieClass from \"./PieClass\";\nimport * as d3 from \"d3\";\n\nclass PieChart extends Component {\n    \n  constructor(props) {\n    super(props);\n    this.chRef = React.createRef();\n  }\n\ncomponentDidMount(){\n    this.drawChart()\n}\n\ndrawChart(){\n    // Create dummy data\n    const data = DonutJSON;\n    let usableData = {}\n    for(let i=0; i<=15; i++){\n        if(data[i]){\n            if(data[i].location === this.props.location.state){\n            usableData = data[i];\n            }\n        }\n    }\n\n    var width = 450, height = 450, margin = 40\n\n    // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\n    var radius = Math.min(width, height) / 2 - margin\n\n    // append the svg object to the div called 'my_dataviz'\n    var svg = d3.select(this.chRef.current)\n    .append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n    .append(\"g\")\n        .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n    // create 2 data_set\n    var data1 = {a: 9, b: 20, c:30, d:8, e:12}\n    // var data2 = {a: 6, b: 16, c:20, d:14, e:19, f:12}\n\n    // set the color scale\n    var color = d3.scaleOrdinal()\n    .domain([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"])\n    .range(d3.schemeDark2);\n\n    // A function that create / update the plot for a given variable:\n\n        // Compute the position of each group on the pie:\n        var pie = d3.pie()\n            .value(function(d) {return d.value; })\n            .sort(function(a, b) { console.log(a) ; return d3.ascending(a.key, b.key);} ) // This make sure that group order remains the same in the pie chart\n        var data_ready = pie(data1)\n\n        // map to data\n        var u = svg.selectAll(\"path\")\n            .data(data_ready)\n\n        // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n        u\n            .enter()\n            .append('path')\n            .merge(u)\n            .transition()\n            .duration(1000)\n            .attr('d', d3.arc()\n            .innerRadius(0)\n            .outerRadius(radius)\n            )\n            .attr('fill', function(d){ return(color(d.data1.key)) })\n            .attr(\"stroke\", \"white\")\n            .style(\"stroke-width\", \"2px\")\n            .style(\"opacity\", 1)\n\n        // remove the group that is not present anymore\n        u\n            .exit()\n            .remove()\n    }\n\nrender() {\n    return (\n      <>\n        <h1>{this.props.location.state}</h1>\n        <div ref={this.chRef}></div> \n        <script src=\"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/d3/dist/d3.js\"></script>\n        <script src=\"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/d3moji/d3moji.js\"></script>\n      </>\n    );\n  }\n}\n\nexport default withRouter(PieChart);\n"]},"metadata":{},"sourceType":"module"}