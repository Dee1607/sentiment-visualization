{"ast":null,"code":"import _classCallCheck from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/src/components/PieChart.js\";\nimport React, { Component, useState, useEffect } from \"react\";\nimport \"./CanadaMap.css\";\nimport Province from \"./Province\";\nimport { withRouter } from \"react-router-dom\";\nimport DonutJSON from \"./PieChartData.json\";\nimport PieClass from \"./PieClass\";\nimport * as d3 from \"d3\";\n\nvar PieChart = /*#__PURE__*/function (_Component) {\n  _inherits(PieChart, _Component);\n\n  var _super = _createSuper(PieChart);\n\n  function PieChart(props) {\n    _classCallCheck(this, PieChart);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(PieChart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.drawChart();\n    }\n  }, {\n    key: \"drawChart\",\n    value: function drawChart() {\n      // Create dummy data\n      var data = DonutJSON;\n      var usableData = {};\n\n      for (var i = 0; i <= 15; i++) {\n        if (data[i]) {\n          if (data[i].location === this.props.location.state) {\n            usableData = data[i];\n          }\n        }\n      }\n\n      var width = 450;\n      height = 450;\n      margin = 40; // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\n\n      var radius = Math.min(width, height) / 2 - margin; // append the svg object to the div called 'my_dataviz'\n\n      var svg = d3.select(\"#my_dataviz\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\"); // create 2 data_set\n\n      var data1 = {\n        a: 9,\n        b: 20,\n        c: 30,\n        d: 8,\n        e: 12\n      }; // var data2 = {a: 6, b: 16, c:20, d:14, e:19, f:12}\n      // set the color scale\n\n      var color = d3.scaleOrdinal().domain([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"]).range(d3.schemeDark2); // A function that create / update the plot for a given variable:\n\n      function update(data) {\n        // Compute the position of each group on the pie:\n        var pie = d3.pie().value(function (d) {\n          return d.value;\n        }).sort(function (a, b) {\n          console.log(a);\n          return d3.ascending(a.key, b.key);\n        }); // This make sure that group order remains the same in the pie chart\n\n        var data_ready = pie(d3.entries(data)); // map to data\n\n        var u = svg.selectAll(\"path\").data(data_ready); // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n\n        u.enter().append('path').merge(u).transition().duration(1000).attr('d', d3.arc().innerRadius(0).outerRadius(radius)).attr('fill', function (d) {\n          return color(d.data.key);\n        }).attr(\"stroke\", \"white\").style(\"stroke-width\", \"2px\").style(\"opacity\", 1); // remove the group that is not present anymore\n\n        u.exit().remove();\n      } // Initialize the plot with the first dataset\n\n\n      update(data1);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }\n      }, this.props.location.state));\n    }\n  }]);\n\n  return PieChart;\n}(Component);\n\nexport default withRouter(PieChart);","map":{"version":3,"sources":["/Users/deeppatel/Desktop/Visualization/Project/csci6406_project/src/components/PieChart.js"],"names":["React","Component","useState","useEffect","Province","withRouter","DonutJSON","PieClass","d3","PieChart","props","drawChart","data","usableData","i","location","state","width","height","margin","radius","Math","min","svg","select","append","attr","data1","a","b","c","d","e","color","scaleOrdinal","domain","range","schemeDark2","update","pie","value","sort","console","log","ascending","key","data_ready","entries","u","selectAll","enter","merge","transition","duration","arc","innerRadius","outerRadius","style","exit","remove"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport \"./CanadaMap.css\";\nimport Province from \"./Province\";\nimport { withRouter } from \"react-router-dom\";\nimport DonutJSON from \"./PieChartData.json\";\nimport PieClass from \"./PieClass\";\nimport * as d3 from \"d3\";\n\nclass PieChart extends Component {\n    \n  constructor(props) {\n    super(props);\n  }\n\ncomponentDidMount(){\n    this.drawChart()\n}\ndrawChart(){\n    // Create dummy data\n    const data = DonutJSON;\n    let usableData = {}\n    for(let i=0; i<=15; i++){\n        if(data[i]){\n            if(data[i].location === this.props.location.state){\n            usableData = data[i];\n            }\n        }\n    }\n\n    var width = 450\n    height = 450\n    margin = 40\n\n// The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\nvar radius = Math.min(width, height) / 2 - margin\n\n// append the svg object to the div called 'my_dataviz'\nvar svg = d3.select(\"#my_dataviz\")\n  .append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height)\n  .append(\"g\")\n    .attr(\"transform\", \"translate(\" + width / 2 + \",\" + height / 2 + \")\");\n\n// create 2 data_set\nvar data1 = {a: 9, b: 20, c:30, d:8, e:12}\n// var data2 = {a: 6, b: 16, c:20, d:14, e:19, f:12}\n\n// set the color scale\nvar color = d3.scaleOrdinal()\n  .domain([\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"])\n  .range(d3.schemeDark2);\n\n// A function that create / update the plot for a given variable:\nfunction update(data) {\n\n  // Compute the position of each group on the pie:\n  var pie = d3.pie()\n    .value(function(d) {return d.value; })\n    .sort(function(a, b) { console.log(a) ; return d3.ascending(a.key, b.key);} ) // This make sure that group order remains the same in the pie chart\n  var data_ready = pie(d3.entries(data))\n\n  // map to data\n  var u = svg.selectAll(\"path\")\n    .data(data_ready)\n\n  // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n  u\n    .enter()\n    .append('path')\n    .merge(u)\n    .transition()\n    .duration(1000)\n    .attr('d', d3.arc()\n      .innerRadius(0)\n      .outerRadius(radius)\n    )\n    .attr('fill', function(d){ return(color(d.data.key)) })\n    .attr(\"stroke\", \"white\")\n    .style(\"stroke-width\", \"2px\")\n    .style(\"opacity\", 1)\n\n  // remove the group that is not present anymore\n  u\n    .exit()\n    .remove()\n\n}\n\n// Initialize the plot with the first dataset\nupdate(data1)\n}\n\nrender() {\n    return (\n      <>\n        <h1>{this.props.location.state}</h1>\n      </>\n    );\n  }\n}\n\nexport default withRouter(PieChart);\n"]},"metadata":{},"sourceType":"module"}